# Demo_Shop_Bot

---

## Демонстрация интерфейса


<table align="center">
  <tr>
    <td align="center" width="400">
      <img src="assets/user_demo.gif" width="400" alt="Оформление заказа"/><br/>
      <b>Юзер панель. Оформление заказа</b>
    </td>
    <td align="center" width="400">
      <img src="assets/admin_demo.gif" width="400" alt="Админ панель"/><br/>
      <b>Админ панель. Смена статуса заказа</b>
    </td>
  </tr>
</table>

---

## Описание проекта

**Demo_Shop_Bot** — это профессиональный шаблон онлайн-магазина на базе Telegram-бота, созданный для малого бизнеса. Реализован на Python с использованием aiogram 3+, FSM и SQLite (Tortoise ORM). Позволяет запускать полноценный e-commerce проект за считанные часы, легко адаптируется под любые задачи клиента и масштабируется до уровня CRM-системы или онлайн-эквайринга. Готов к интеграции платёжных сервисов и дальнейшему развитию функционала.

---


## Архитектура и особенности проекта

- **Модульная архитектура:** Чёткое разделение по зонам ответственности (user/admin-логика, обработчики, утилиты, состояния, клавиатуры, база данных).
- **Асинхронный Python (aiogram 3+):** Высокая производительность за счёт асинхронной обработки и событийной архитектуры.
- **База данных SQLite + Tortoise ORM:** Централизованное хранение всех данных (пользователи, товары, корзина, заказы) через универсальные CRUD-функции.
- **Гибкая FSM:** Пошаговые сценарии (оформление заказа, редактирование профиля, добавление категорий и товаров) реализованы через Finite State Machine с сохранением промежуточных данных и возможностью возврата на любой шаг.
- **Каталог и корзина:** Пагинация товаров, быстрый переход между категориями, инлайн-меню и динамическое обновление корзины.
- **Универсальные обработчики и повторное использование кода:** Все повторяющиеся действия вынесены в утилиты (валидация, удаление сообщений, навигация, алерты).
- **DRY & Clean Code:** Минимум дублирования, вся логика покрыта докстрингами, аннотациями типов и подробной документацией.
- **Обработка ошибок и UX:** Информативные алерты, обработка неожиданных ситуаций, возврат “назад” и “в меню” доступны на каждом шаге.
- **Админ-панель:** Просмотр заказов и пользователей, статистика, экспорт в CSV, поиск и редактирование заказов и товаров.
- **Масштабируемость:** Легко расширяется новыми сущностями, полями и функциями — код готов к интеграции CRM, онлайн-оплаты, подписок и аналитики.
- **Чистота интерфейса:** Автоматическое удаление старых сообщений и уведомлений для предотвращения захламления чата.


---


## Структура проекта

<details>
<summary>Развернуть дерево проекта</summary>

```
Demo_Shop_Bot/
├── .venv/
├── assets/
├── backups/
├── bot/
│   ├── handlers/
│   │    ├── admin_handlers/
│   │    │     ├── init.py
│   │    │     ├── add_category.py
│   │    │     ├── add_product.py
│   │    │     ├── admin_access.py
│   │    │     ├── admin_catalog.py
│   │    │     ├── admin_common.py
│   │    │     ├── admin_help.py
│   │    │     ├── admin_orders.py
│   │    │     ├── admin_stats.py
│   │    │     ├── delete_product.py
│   │    │     ├── edit_category.py
│   │    │     ├── edit_product.py
│   │    │     ├── search_order.py
│   │    │     └── search_product.py
│   │    ├── user_handlers/
│   │    │     ├── init.py
│   │    │     ├── user_cart.py
│   │    │     ├── user_catalog.py
│   │    │     ├── user_checkout.py
│   │    │     ├── user_common.py
│   │    │     ├── user_help.py
│   │    │     ├── user_menu.py
│   │    │     ├── user_orders.py
│   │    │     └── user_profile.py
│   │    └── init.py
│   ├── keyboards/
│   │    ├── admin/
│   │    │     ├── init.py
│   │    │     ├── admin_menu.py
│   │    │     ├── catalog_keyboards.py
│   │    │     ├── help_keyboard.py
│   │    │     ├── order_keyboards.py
│   │    │     └── stats_kb.py
│   │    └── user/
│   │          ├── init.py
│   │          ├── order_keyboards.py
│   │          ├── user_cart_keyboards.py
│   │          ├── user_catalog_keyboards.py
│   │          ├── user_checkout_keyboards.py
│   │          ├── user_common_keyboards.py
│   │          ├── user_main_menu.py
│   │          └── user_profile_keyboards.py
│   ├── states/
│   │    ├── admin_states/
│   │    │     ├── init.py
│   │    │     ├── category_states.py
│   │    │     ├── order_states.py
│   │    │     └── product_states.py
│   │    └── user_states/
│   │          ├── init.py
│   │          ├── order_states.py
│   │          └── profile_states.py
│   └── utils/
│        ├── admin_utils/
│        │     ├── init.py
│        │     ├── catalog_utils.py
│        │     └── order_utils.py
│        ├── user_utils/
│        │     ├── init.py
│        │     ├── universal_handlers.py
│        │     ├── user_cart_utils.py
│        │     ├── user_checkout_utils.py
│        │     ├── user_common_utils.py
│        │     ├── user_orders_utils.py
│        │     ├── user_profile_utils.py
│        │     └── validators.py
│        ├── common_utils.py
│        └── constants.py
├── config_data/
│   ├── init.py
│   ├── bot_instance.py
│   └── env.py
├── database/
│   ├── init.py
│   ├── crud.py
│   ├── init_db.py
│   └── models.py
├── .env
├── .gitignore
├── dump.rdb
├── LICENSE
├── main.py
├── README.md
├── requirements.txt
└── shop.db
```
</details>

---

## Основной функционал

- Каталог с категориями, пагинация и фильтрация товаров
- Корзина: добавление, удаление, очистка, отображение в одном месте
- Автоматическое сохранение профиля пользователя после оформления первой покупки
- Подстановка контактных данных из профиля при оформлении заказа
- Оформление заказа с валидацией и FSM (пошаговые сценарии, все временные состояния хранятся в Redis)
- CRUD-профиль пользователя с edit mode
- Навигация и возврат в меню/каталог с любого шага
- Чистка старых сообщений для чистого UX
- Админ-панель: просмотр категорий, товаров и заказов, поиск, редактирование, статистика, экспорт в CSV
- Гибкая архитектура для расширения под CRM/ERP и интеграцию онлайн-оплаты
- **Автоматическое резервное копирование данных Redis (dump.rdb) и базы SQLite для сохранности заказов и профилей**

---

## Запуск и использование

1. Клонируйте репозиторий, установите зависимости:
    ```bash
    pip install -r requirements.txt
    ```
2. Настройте параметры в `.env` (токен бота, база данных).
3. Убедитесь, что у вас запущен Redis (по умолчанию на `localhost:6379`).
4. Инициализируйте базу данных (создаётся автоматически при первом запуске).
5. Запустите `main.py`:
    ```bash
    python main.py
    ```
6. Управляйте ботом через Telegram, используя меню и команды.

---

## Рекомендации по кастомизации

- Меняйте категории, оформление, структуру товаров через админ-панель или БД.
- Для интеграции онлайн-оплаты, CRM и подписок используйте модульную архитектуру (см. README и комментарии в коде).
- Документация и docstring-комментарии помогут быстро адаптировать проект под клиента.

---

## Масштабирование и монетизация

- Решение готово для продажи и кастомизации под клиентов малого и среднего бизнеса.
- Шаблон может использоваться как база для разработки новых e-commerce ботов, дорабатываться под агентские продажи, сопровождение и автоматизацию магазинов.

---

## Лицензия

Проект распространяется под стандартной лицензией [LICENSE](LICENSE).

---

## Контакты — блок для заказа


- Telegram: [@OxPrecision](https://t.me/OxPrecision)
- Email: wrkfrvr@gmail.com

---

© 2025 Nikita OxPrecision. All rights reserved.



